/*!
 * Author: WGFE
 * Date: Thu Apr 25 2024 16:46:37 GMT+0800 (China Standard Time)
 */!function(e){var t={};function n(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(l,i,function(t){return e[t]}.bind(null,i));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const l=["download","share","resizeContainer","touchStart","config","showModel","showToast","showActionSheet","getFollowInfo","openCommunity","redirectTo","getPassData","subscribeBizPush","initThumbsUp","queryThumbsUp","publish"],i=["https://game.weixin.qq.com","https://genshin.1752e.com/"],o=e=>{-1!==l.indexOf(e.eventName)&&window.parent.postMessage(JSON.stringify(e),"*")},a=(e,t)=>{window.addEventListener("message",n=>{if(-1!==i.indexOf((null==n?void 0:n.origin)||""))try{const l=JSON.parse(n.data||"{}");l.eventName===e&&t(l)}catch(e){t(null)}})};class r extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"closed"}),t=document.createElement("div"),n=document.createElement("style");let l;n.textContent="\n      :host {\n      }\n      .thumbs-up-button {\n        width: 100%;\n        height: 100%;\n      }\n\n      .thumbs-up-button-debug {\n        background-color: rgba(255, 0, 0, 0.6);\n      }\n    ",t.classList.add("thumbs-up-button"),t.innerHTML="<slot></slot>",e.appendChild(t),e.appendChild(n),t.addEventListener("click",e=>{if(l=Date.now().toString(),e.isTrusted){let e=+this.getAttribute("bizid"),t=this.getAttribute("appid"),n=this.getAttribute("openid"),i=this.getAttribute("unique-key")||this.getAttribute("key"),a=this.dataset||{},r={};for(let e in a)r[e]=a[e];o({eventName:"initThumbsUp",eventData:{bizid:e,appid:t,openid:n,key:i,bizData:r},eventKey:l})}}),a("initThumbsUpCbk",e=>{(null==e?void 0:e.eventKey)===l&&(0===(null==e?void 0:e.eventData.errcode)?this.dispatchEvent(new CustomEvent("success",{detail:{openid:this.getAttribute("openid"),key:this.getAttribute("unique-key")||this.getAttribute("key")}})):this.dispatchEvent(new CustomEvent("fail",{detail:{errcode:e.eventData.errcode,errmsg:e.eventData.errmsg}})))});"true"===this.getAttribute("debug")&&t.classList.add("thumbs-up-button-debug")}}var u=r;let d=0;const v=()=>{document.body.addEventListener("touchstart",s)};function s(){if(d<5){d+=1;const{wg:e}=window,t={eventName:"touchStart",eventData:{count:d},eventKey:Date.now().toString()};o(t)}}var c,g;function f(e){const t=null==e?void 0:e.params;if(!t||"object"!=typeof t)return"no params";const{appid:n,type:l,content:i="",imageList:o,videoInfo:a,linkList:r}=t;if(!n)return"appid is required";if(!l)return"type is required";if("string"!=typeof(u=l)||!(u in c))return"invalid type";var u,d;if(l===c.text&&!i)return"content is required";if(l===c.image){const e=function(e){if(!e)return"Images is null or undefined";if(0===e.length)return"Images should not be empty";if(e.length>9)return"Up to 9 images";for(const t of e){if("number"!=typeof t.width||t.width<=0)return"Invalid width value";if("number"!=typeof t.height||t.height<=0)return"Invalid height value";if("string"!=typeof t.url||""===t.url.trim())return"Invalid URL value";if(t.isGif&&"boolean"!=typeof t.isGif)return"Invalid isGif value"}return""}(o);if(e)return e}if(l===c.video){const e=(d=a)?"number"!=typeof d.width||d.width<=0?"Invalid width value":"number"!=typeof d.height||d.height<=0?"Invalid height value":"string"!=typeof d.url||""===d.url.trim()?"Invalid URL value":"string"!=typeof d.snapshot||""===d.snapshot.trim()?"Invalid snapshot value":"number"!=typeof d.duration||d.duration<=0?"Invalid duration value":d.vid&&"number"!=typeof d.vid&&"string"!=typeof d.vid?"Invalid vid value":"":"Video is required";if(e)return e}const v=function(e){if(!e||0===e.length)return"";const t=/^https:\/\/game\.weixin\.qq\.com\//;for(const n of e){if(!n.type||"string"!=typeof n.type)return"Invalid type";if(!n.jumpUrl||"string"!=typeof n.jumpUrl||!t.test(n.jumpUrl))return"Invalid jumpUrl";if(!n.text||"string"!=typeof n.text)return"Invalid text"}return""}(r);return v||""}!function(e){e.text="text",e.image="image",e.video="video"}(c||(c={})),function(e){e.H264="H.264/AVC",e.H265="H.265/HEVC",e.VP9="VP9",e.AV1="AV1",e.MPEG4="MPEG-4",e.MPEG2="MPEG-2",e.VC1="VC-1",e.DivX="DivX/Xvid"}(g||(g={}));const p={config:e=>{const{wg:t}=window,n={eventName:"config",eventData:null==e?void 0:e.params,eventKey:Date.now().toString()};o(n),a("configCbk",l=>{var i,o,a,r,d;l.eventKey===n.eventKey&&(0===l.eventData.errcode?(t.isConfigTrue=!0,t.globalInfo={appid:null===(i=null==e?void 0:e.params)||void 0===i?void 0:i.appid,actid:null===(o=null==e?void 0:e.params)||void 0===o?void 0:o.actid,signature:l.eventData.data.signature||""},null===(a=null==e?void 0:e.success)||void 0===a||a.call(e,l.eventData.data),window.customElements.define("thumbs-up-button",u)):null===(r=null==e?void 0:e.fail)||void 0===r||r.call(e,l.eventData.errmsg),null===(d=null==e?void 0:e.complete)||void 0===d||d.call(e))})},download:e=>{var t,n,l;const{wg:i}=window,r={eventName:"download",eventData:{appid:null===(t=i.globalInfo)||void 0===t?void 0:t.appid},eventKey:Date.now().toString()};if(!i.isConfigTrue)return null===(n=null==e?void 0:e.fail)||void 0===n||n.call(e,"global config err"),void(null===(l=null==e?void 0:e.complete)||void 0===l||l.call(e));o(r),a("downloadCbk",t=>{var n,l,i;t.eventKey===r.eventKey&&(0===t.eventData.errcode?null===(n=null==e?void 0:e.success)||void 0===n||n.call(e,t.eventData.data):null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,t.eventData.errmsg),null===(i=null==e?void 0:e.complete)||void 0===i||i.call(e))})},showToast:e=>{const{wg:t}=window,n={eventName:"showToast",eventData:e.params,eventKey:Date.now().toString()};t.isConfigTrue&&o(n)},showModel:e=>{var t,n;const{wg:l}=window,i={eventName:"showModel",eventData:(null==e?void 0:e.params)||{},eventKey:Date.now().toString()};if(!l.isConfigTrue)return null===(t=null==e?void 0:e.fail)||void 0===t||t.call(e,"global config err"),void(null===(n=null==e?void 0:e.complete)||void 0===n||n.call(e));o(i),a("showModelCbk",t=>{var n,l,o;t.eventKey===i.eventKey&&(0===t.eventData.errcode?null===(n=null==e?void 0:e.success)||void 0===n||n.call(e,t.eventData.data):null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,t.eventData.errmsg),null===(o=null==e?void 0:e.complete)||void 0===o||o.call(e))})},share:e=>{const{wg:t}=window,n={eventName:"share",eventData:e.params,eventKey:Date.now().toString()};t.isConfigTrue&&(o(n),a("shareCbk",t=>{var l,i,o;t.eventKey===n.eventKey&&(0===t.eventData.errcode?null===(l=null==e?void 0:e.success)||void 0===l||l.call(e,t.eventData.data):null===(i=null==e?void 0:e.fail)||void 0===i||i.call(e,t.eventData.errmsg),null===(o=null==e?void 0:e.complete)||void 0===o||o.call(e))}))},getFollowInfo:e=>{var t,n,l;const{wg:i}=window,r={eventName:"getFollowInfo",eventData:{appid:null===(t=i.globalInfo)||void 0===t?void 0:t.appid},eventKey:Date.now().toString()};if(!i.isConfigTrue)return null===(n=null==e?void 0:e.fail)||void 0===n||n.call(e,"global config err"),void(null===(l=null==e?void 0:e.complete)||void 0===l||l.call(e));o(r),a("getFollowInfoCbk",t=>{var n,l,i;t.eventKey===r.eventKey&&(0===t.eventData.errcode?null===(n=null==e?void 0:e.success)||void 0===n||n.call(e,t.eventData.data):null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,t.eventData.errmsg),null===(i=null==e?void 0:e.complete)||void 0===i||i.call(e))})},openCommunity:e=>{var t,n,l,i;const{wg:r}=window,u={eventName:"openCommunity",eventData:{appid:null===(t=r.globalInfo)||void 0===t?void 0:t.appid,actid:null===(n=r.globalInfo)||void 0===n?void 0:n.actid},eventKey:Date.now().toString()};if(!r.isConfigTrue)return null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,"global config err"),void(null===(i=null==e?void 0:e.complete)||void 0===i||i.call(e));o(u),a("openCommunityCbk",t=>{var n,l,i;t.eventKey===u.eventKey&&(0===t.eventData.errcode?null===(n=null==e?void 0:e.success)||void 0===n||n.call(e,t.eventData.data):null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,t.eventData.errmsg),null===(i=null==e?void 0:e.complete)||void 0===i||i.call(e))})},redirectTo:e=>{const{wg:t}=window,n={eventName:"redirectTo",eventData:e.params,eventKey:Date.now().toString()};t.isConfigTrue&&(console.log("redirectTo emit"),o(n),a("redirectToCbk",t=>{var l,i,o;t.eventKey===n.eventKey&&(0===t.eventData.errcode?null===(l=null==e?void 0:e.success)||void 0===l||l.call(e,t.eventData.data):null===(i=null==e?void 0:e.fail)||void 0===i||i.call(e,t.eventData.errmsg),null===(o=null==e?void 0:e.complete)||void 0===o||o.call(e))}))},getPassData:e=>{const{wg:t}=window,n={eventName:"getPassData",eventData:e.params,eventKey:Date.now().toString()};t.isConfigTrue&&(o(n),a("getPassDataCbk",t=>{var l,i,o;t.eventKey===n.eventKey&&(0===t.eventData.errcode?null===(l=null==e?void 0:e.success)||void 0===l||l.call(e,t.eventData.data):null===(i=null==e?void 0:e.fail)||void 0===i||i.call(e,t.eventData.errmsg),null===(o=null==e?void 0:e.complete)||void 0===o||o.call(e))}))},subscribeBizPush:e=>{const{wg:t}=window,n={eventName:"subscribeBizPush",eventData:e.params,eventKey:Date.now().toString()};t.isConfigTrue&&(o(n),a("subscribeBizPushCbk",t=>{var l,i,o;(null==t?void 0:t.eventKey)===n.eventKey&&(0===t.eventData.errcode?null===(l=null==e?void 0:e.success)||void 0===l||l.call(e,t.eventData.data):null===(i=null==e?void 0:e.fail)||void 0===i||i.call(e,t.eventData.errmsg),null===(o=null==e?void 0:e.complete)||void 0===o||o.call(e))}))},queryThumbsUp:e=>{const{wg:t}=window,n={eventName:"queryThumbsUp",eventData:e.params,eventKey:Date.now().toString()};t.isConfigTrue&&(o(n),a("queryThumbsUpCbk",t=>{var l,i,o;(null==t?void 0:t.eventKey)===n.eventKey&&(0===t.eventData.errcode?null===(l=null==e?void 0:e.success)||void 0===l||l.call(e,t.eventData.data):null===(i=null==e?void 0:e.fail)||void 0===i||i.call(e,t.eventData.errmsg),null===(o=null==e?void 0:e.complete)||void 0===o||o.call(e))}))},publish:e=>{var t,n,l,i;const r=f(e);if(r)return console.error("publish error msg:",r),null===(t=null==e?void 0:e.fail)||void 0===t||t.call(e,r),void(null===(n=null==e?void 0:e.complete)||void 0===n||n.call(e));const{wg:u}=window,d={eventName:"publish",eventData:Object.assign({},null==e?void 0:e.params),eventKey:Date.now().toString()};if(!u.isConfigTrue)return null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,"global config err"),void(null===(i=null==e?void 0:e.complete)||void 0===i||i.call(e));o(d),a("publishCbk",t=>{var n,l,i;t.eventKey===d.eventKey&&(0===t.eventData.errcode?null===(n=null==e?void 0:e.success)||void 0===n||n.call(e,t.eventData.data):null===(l=null==e?void 0:e.fail)||void 0===l||l.call(e,t.eventData.errmsg),null===(i=null==e?void 0:e.complete)||void 0===i||i.call(e))})}};window.addEventListener("load",()=>{(()=>{const e={height:document.body.clientHeight,width:document.body.clientWidth},{wg:t}=window,n={eventName:"resizeContainer",eventData:e,eventKey:Date.now().toString()};o(n)})(),v()}),window.wg=p}]);